# Define el flujo de IntegraciÃ³n Continua (CI) y Despliegue Continuo (CD)

name: ğŸ§‘â€ğŸ’» Pipeline de CI/CD Simple

# 1. EVENTO DE EJECUCIÃ“N: Â¿CuÃ¡ndo debe correr este flujo?
on:
  push:
    branches: [ main ] # Se ejecuta automÃ¡ticamente cuando se sube cÃ³digo a la rama 'main'

# 2. DEFINICIÃ“N DE TRABAJOS (JOBS)
jobs:
  build_test_deploy:
    # Este trabajo corre en un entorno de Ubuntu reciente
    runs-on: ubuntu-latest
    
    steps:
    
    # --- PASO 1: CONFIGURACIÃ“N E INTEGRACIÃ“N CONTINUA (CI) ---
    - name: ğŸ“¥ Clonar el CÃ³digo
      uses: actions/checkout@v4
      # Baja el cÃ³digo del repositorio al servidor de GitHub Actions
      
    - name: ğŸ Configurar Entorno Python
      uses: actions/setup-python@v5
      with:
        python-version: '3.10'
        
    - name: ğŸš¦ Quality Gate (Pruebas Unitarias)
  # Cambio temporal para ver si encuentra el archivo
  run: |
    ls -la
    python calculadora.py
      # y el pipeline se detiene automÃ¡ticamente.

    # --- PASO 2: DESPLIEGUE CONTINUO (CD) ---
    - name: ğŸš€ SimulaciÃ³n de Despliegue (CD)
      # Esta condiciÃ³n asegura que el paso SOLO corra si los pasos anteriores fueron exitosos.
      if: success()
      run: |
        echo "=========================================================="
        echo "âœ… CÃ³digo certificado por el Quality Gate."
        echo "Iniciando Despliegue Continuo..."
        echo "Desplegando la versiÃ³n V1.0 a un servidor simulado."
        echo "ğŸ‰ Despliegue COMPLETADO. El cÃ³digo estÃ¡ en producciÃ³n."
        echo "=========================================================="

